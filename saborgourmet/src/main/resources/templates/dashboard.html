<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Sabor Gourmet</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
</head>
<body class="bg-light">
    <!-- Header -->
    <div th:replace="~{fragments/header :: header}"></div>
    
    <!-- Main Content -->
    <div class="container mt-4">
        <!-- Bienvenida -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card border-0 shadow-sm">
                    <div class="card-body">
                        <h2 class="card-title">
                            <i class="bi bi-house-door-fill text-primary"></i>
                            Bienvenido al Sistema Sabor Gourmet
                        </h2>
                        <p class="card-text text-muted">
                            Usuario: <strong sec:authentication="name">Usuario</strong> | 
                            Rol: <strong sec:authentication="authorities">Rol</strong>
                        </p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Tarjetas de acceso rápido -->
        <div class="row g-4">
            <!-- Administración -->
            <div class="col-md-6 col-lg-3" sec:authorize="hasRole('ADMIN')">
                <div class="card border-0 shadow-sm h-100 hover-card">
                    <div class="card-body text-center">
                        <div class="mb-3">
                            <i class="bi bi-gear-fill text-primary" style="font-size: 3rem;"></i>
                        </div>
                        <h5 class="card-title">Administración</h5>
                        <p class="card-text text-muted">Gestionar usuarios y configuración del sistema</p>
                        <a href="/admin/usuarios" class="btn btn-primary">
                            <i class="bi bi-arrow-right-circle"></i> Acceder
                        </a>
                    </div>
                </div>
            </div>
            
            <!-- Usuarios -->
            <div class="col-md-6 col-lg-3" sec:authorize="hasRole('ADMIN')">
                <div class="card border-0 shadow-sm h-100 hover-card">
                    <div class="card-body text-center">
                        <div class="mb-3">
                            <i class="bi bi-people-fill text-success" style="font-size: 3rem;"></i>
                        </div>
                        <h5 class="card-title">Usuarios</h5>
                        <p class="card-text text-muted">Administrar usuarios del sistema</p>
                        <a href="/admin/usuarios" class="btn btn-success">
                            <i class="bi bi-arrow-right-circle"></i> Acceder
                        </a>
                    </div>
                </div>
            </div>
            
            <!-- Bitácora -->
            <div class="col-md-6 col-lg-3" sec:authorize="hasRole('ADMIN')">
                <div class="card border-0 shadow-sm h-100 hover-card">
                    <div class="card-body text-center">
                        <div class="mb-3">
                            <i class="bi bi-journal-text text-warning" style="font-size: 3rem;"></i>
                        </div>
                        <h5 class="card-title">Bitácora</h5>
                        <p class="card-text text-muted">Consultar auditoría del sistema</p>
                        <a href="/bitacora" class="btn btn-warning">
                            <i class="bi bi-arrow-right-circle"></i> Acceder
                        </a>
                    </div>
                </div>
            </div>
            
            <!-- Pedidos -->
            <div class="col-md-6 col-lg-3" sec:authorize="hasAnyRole('MOZO', 'COCINERO', 'ADMIN')">
                <div class="card border-0 shadow-sm h-100 hover-card">
                    <div class="card-body text-center">
                        <div class="mb-3">
                            <i class="bi bi-clipboard-check-fill text-info" style="font-size: 3rem;"></i>
                        </div>
                        <h5 class="card-title">Pedidos</h5>
                        <p class="card-text text-muted">Gestionar pedidos de clientes</p>
                        <a href="/pedidos" class="btn btn-info">
                            <i class="bi bi-arrow-right-circle"></i> Acceder
                        </a>
                    </div>
                </div>
            </div>
            
            <!-- Ventas -->
            <div class="col-md-6 col-lg-3" sec:authorize="hasAnyRole('CAJERO', 'ADMIN')">
                <div class="card border-0 shadow-sm h-100 hover-card">
                    <div class="card-body text-center">
                        <div class="mb-3">
                            <i class="bi bi-cash-coin text-success" style="font-size: 3rem;"></i>
                        </div>
                        <h5 class="card-title">Ventas</h5>
                        <p class="card-text text-muted">Procesar ventas y cobros</p>
                        <a href="/ventas" class="btn btn-success">
                            <i class="bi bi-arrow-right-circle"></i> Acceder
                        </a>
                    </div>
                </div>
            </div>
            
            <!-- Inventario -->
            <div class="col-md-6 col-lg-3" sec:authorize="hasRole('ADMIN')">
                <div class="card border-0 shadow-sm h-100 hover-card">
                    <div class="card-body text-center">
                        <div class="mb-3">
                            <i class="bi bi-box-seam-fill text-danger" style="font-size: 3rem;"></i>
                        </div>
                        <h5 class="card-title">Inventario</h5>
                        <p class="card-text text-muted">Control de productos y stock</p>
                        <a href="/inventario" class="btn btn-danger">
                            <i class="bi bi-arrow-right-circle"></i> Acceder
                        </a>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Información del sistema -->
        <div class="row mt-5">
            <div class="col-12">
                <div class="card border-0 shadow-sm">
                    <div class="card-body">
                        <h5 class="card-title">
                            <i class="bi bi-info-circle-fill text-primary"></i>
                            Módulo 6: Administración y Seguridad
                        </h5>
                        <p class="card-text">
                            Este módulo implementa:
                        </p>
                        <ul>
                            <li><strong>RF16:</strong> Gestión de Usuarios (CRUD completo)</li>
                            <li><strong>RF17:</strong> Sistema de Bitácora (Auditoría automática)</li>
                            <li><strong>RF18:</strong> Control de Accesos (Spring Security)</li>
                            <li><strong>RNF1:</strong> Seguridad de Contraseñas (BCrypt strength 12)</li>
                            <li><strong>RNF2 y RNF3:</strong> Autenticación y Auditoría con AOP</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Footer -->
    <div th:replace="~{fragments/footer :: footer}"></div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <style>
        .hover-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .hover-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1) !important;
        }
    </style>
</body>
</html>